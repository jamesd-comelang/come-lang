#ifndef NET_TCP_H
#define NET_TCP_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

typedef enum {
    NET_TCP_EVENT_NOTHING  = 0,
    NET_TCP_EVENT_READABLE = 1 << 0,
    NET_TCP_EVENT_WRITABLE = 1 << 1,
    NET_TCP_EVENT_HUP      = 1 << 2,
    NET_TCP_EVENT_RDHUP    = 1 << 3,
    NET_TCP_EVENT_ERROR    = 1 << 4,
    NET_TCP_EVENT_ALL      = 0xFF
} net_tcp_Event;

typedef struct net_tcp_Addr net_tcp_Addr;
typedef struct net_tcp_Connection net_tcp_Connection;
typedef void (*net_tcp_EventHandler)(struct net_tcp_Connection*, net_tcp_Event);

// Event callback type
typedef void (*net_tcp_event_cb)(struct net_tcp_Connection* conn, net_tcp_Event event, void* user_data);

// Addr methods
net_tcp_Addr* net_tcp_Addr_make(const char* ip, uint16_t port);

// Connection methods
net_tcp_Connection* net_tcp_connect(net_tcp_Addr* addr);
void net_tcp_Connection_on(net_tcp_Connection* conn, net_tcp_Event ev, net_tcp_EventHandler handler);
void net_tcp_Connection_ignore(net_tcp_Connection* conn, net_tcp_Event ev);
void net_tcp_Connection_resume(net_tcp_Connection* conn, net_tcp_Event ev);

#endif

